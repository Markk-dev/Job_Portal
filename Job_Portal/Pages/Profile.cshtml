@page
@model Job_Portal.Pages.ProfileModel
@{
    ViewData["Title"] = "Profile";
}

<div class="profile-container">
    <!-- Left sidebar -->
    <div class="profile-sidebar">
        <div class="user-info">
            <div class="user-avatar">
                <div class="avatar-placeholder">
                    @Model.UserProfile.FullName.Substring(0, 1)
                </div>
            </div>
            <h2 class="user-name">@Model.UserProfile.FullName</h2>
            <p class="user-bio">@Model.UserProfile.Bio</p>
        </div>

        <div class="sidebar-nav">
            <ul class="nav-list">
                <li class="nav-item active">
                    <a href="#" class="nav-link">Profile</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Job Preference</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Community Follows</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Contributions</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Account settings</a>
                </li>
            </ul>
        </div>

        <div class="sidebar-footer">
            <div class="footer-actions">
                <a href="#" class="sign-out-link">Sign out</a>
                <button class="icon-button">
                    <i class="sign-out-icon">↗</i>
                </button>
            </div>
            <a href="#" class="help-link">Help Center</a>
        </div>
    </div>

    <!-- Main content -->
    <div class="main-content">
        <div class="profile-header">
            <h1 class="profile-title">Profile</h1>
            <div class="profile-illustration">
                <img src="/images/profile-illustration.png" alt="Profile illustration" />
            </div>
        </div>

        <div class="profile-section">
            <h2 class="section-title">My information</h2>

            <div class="info-grid">
                <div class="info-item">
                    <label class="info-label">Employment status</label>
                    <div class="info-value">@Model.UserProfile.EmploymentStatus</div>
                </div>

                <div class="info-item">
                    <label class="info-label">Full name</label>
                    <div class="info-value">@Model.UserProfile.FullName</div>
                </div>

                <div class="info-item">
                    <label class="info-label">Location</label>
                    <div class="info-value">@Model.UserProfile.Location</div>
                </div>

                <div class="info-item">
                    <label class="info-label">University or College</label>
                    <div class="info-value">@Model.UserProfile.University</div>
                </div>

                <div class="info-item">
                    <label class="info-label">Degree type</label>
                    <div class="info-value">@Model.UserProfile.DegreeType</div>
                </div>
            </div>
        </div>

        <div class="profile-section">
            <h2 class="section-title">Resume</h2>
            <p class="section-description">
                Your resume can be visible to hiring employers or you can keep it hidden. See the Privacy
                for more info.
            </p>

            <div class="resume-card">
                <div class="resume-info">
                    <div class="resume-icon">📄</div>
                    <div class="resume-name">@Model.UserProfile.ResumeFileName</div>
                </div>

                <div class="resume-actions">
                    <form method="post" asp-page-handler="UpdateResumeVisibility" class="visibility-form">
                        <label class="visibility-label">
                            <input type="checkbox" asp-for="IsResumeVisible" />
                            <span class="visibility-text">Visible to hiring employers</span>
                        </label>
                    </form>

                    <div class="download-actions">
                        <button class="action-btn">
                            <i class="more-icon">⋯</i>
                        </button>
                        <form method="post" asp-page-handler="DownloadResume">
                            <button type="submit" class="download-btn">
                                <i class="download-icon">↓</i> Download
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Overall layout */
    .profile-container {
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    /* Left sidebar */
    .profile-sidebar {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .user-info {
        text-align: center;
        margin-bottom: 30px;
    }

    .user-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        margin: 0 auto 15px;
        overflow: hidden;
        border: 2px solid #e0e0e0;
    }

    .avatar-placeholder {
        width: 100%;
        height: 100%;
        background-color: #4CAF50;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        font-weight: bold;
        color: white;
    }

    .user-name {
        font-size: 24px;
        font-weight: bold;
        color: #4CAF50;
        margin-bottom: 10px;
    }

    .user-bio {
        font-size: 14px;
        color: #666;
        line-height: 1.5;
    }

    .sidebar-nav {
        flex: 1;
    }

    .nav-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .nav-item {
        margin-bottom: 5px;
    }

    .nav-link {
        display: block;
        padding: 10px 0;
        color: #333;
        text-decoration: none;
        transition: color 0.2s;
    }

    .nav-item.active .nav-link {
        font-weight: bold;
        color: #4CAF50;
    }

    .nav-link:hover {
        color: #4CAF50;
    }

    .sidebar-footer {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e0e0e0;
    }

    .footer-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .sign-out-link {
        color: #333;
        text-decoration: none;
        font-weight: bold;
    }

    .icon-button {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 18px;
    }

    .help-link {
        display: block;
        padding: 10px 0;
        text-align: center;
        background-color: #f5f5f5;
        border-radius: 4px;
        color: #333;
        text-decoration: none;
    }

    /* Main content */
    .main-content {
        background-color: #fff;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
        overflow: hidden;
    }

    .profile-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
    }

    .profile-title {
        font-size: 28px;
        font-weight: bold;
        color: #4CAF50;
        margin: 0;
    }

    .profile-illustration {
        max-width: 200px;
    }

        .profile-illustration img {
            width: 100%;
            height: auto;
        }

    .profile-section {
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
    }

    .section-title {
        font-size: 20px;
        font-weight: bold;
        color: #4CAF50;
        margin: 0 0 15px 0;
    }

    .section-description {
        font-size: 14px;
        color: #666;
        margin-bottom: 20px;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .info-item {
        margin-bottom: 15px;
    }

    .info-label {
        display: block;
        font-size: 14px;
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
    }

    .info-value {
        font-size: 14px;
        color: #666;
    }

    .resume-card {
        background-color: #e8f5e9;
        border-radius: 8px;
        padding: 15px;
    }

    .resume-info {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }

    .resume-icon {
        font-size: 24px;
        margin-right: 10px;
    }

    .resume-name {
        font-size: 16px;
        font-weight: bold;
    }

    .resume-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .visibility-label {
        display: flex;
        align-items: center;
        cursor: pointer;
    }

    .visibility-text {
        margin-left: 5px;
        font-size: 14px;
    }

    .download-actions {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .action-btn {
        background: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    .download-btn {
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 8px 15px;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Handle checkbox change to auto-submit the form
        const visibilityCheckbox = document.querySelector('.visibility-form input[type="checkbox"]');
        if (visibilityCheckbox) {
            visibilityCheckbox.addEventListener('change', function() {
                this.closest('form').submit();
            });
        }

        // Show message if it exists
    @if (TempData["Message"] != null)
    {
        <text>
                alert('@TempData["Message"]');
        </text>
    }
    });
</script>

