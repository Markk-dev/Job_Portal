@page
@model Job_Portal.Pages.ProfileModel
@{
    ViewData["Title"] = "Profile";
}
<head>
    <link rel="stylesheet" href="~/css/profile.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/global.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>

<div class="profile-container">
    <!-- Left sidebar -->
    <div class="profile-sidebar">
        <div class="user-info">
            <div class="user-avatar">
                <div class="avatar-placeholder">
                    @Model.UserProfile.FullName.Substring(0, 1)
                </div>
            </div>
            <h2 class="user-name">@Model.UserProfile.FullName</h2>
            <p class="user-bio">@Model.UserProfile.Bio</p>
        </div>

        <div class="sidebar-nav">
            <ul class="nav-list">
                <li class="nav-item active">
                    <a href="#" class="nav-link">Profile</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Job Preference</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Community Follows</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Contributions</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Account settings</a>
                </li>
            </ul>
        </div>

        <div class="sidebar-footer">
            <div class="footer-actions">
                <a href="/Auth/Login" class="sign-out-link">Sign out</a>
                <button class="icon-button">
                    <i class="sign-out-icon">↗</i>
                </button>
            </div>
            <a href="#" class="help-link">Help Center</a>
        </div>
    </div>

    <!-- Main content -->
    <div class="main-content">
        <div class="profile-header">
            <h1 class="profile-title">Profile</h1>
            <div class="profile-illustration">
                <img src="/images/profile-illustration.png" alt="Profile illustration" />
            </div>
        </div>

        <div class="profile-section">
            <h2 class="section-title">My information</h2>

            <div class="info-grid">
                <div class="info-item">
                    <label class="info-label">Employment status</label>
                    <div class="info-value">@Model.UserProfile.EmploymentStatus</div>
                </div>

                <div class="info-item">
                    <label class="info-label">Full name</label>
                    <div class="info-value">@Model.UserProfile.FullName</div>
                </div>

                <div class="info-item">
                    <label class="info-label">Location</label>
                    <div class="info-value">@Model.UserProfile.Location</div>
                </div>

                <div class="info-item">
                    <label class="info-label">University or College</label>
                    <div class="info-value">@Model.UserProfile.University</div>
                </div>

                <div class="info-item">
                    <label class="info-label">Degree type</label>
                    <div class="info-value">@Model.UserProfile.DegreeType</div>
                </div>
            </div>
        </div>

        <div class="profile-section">
            <h2 class="section-title">Resume</h2>
            <p class="section-description">
                Your resume can be visible to hiring employers or you can keep it hidden. See the Privacy
                for more info.
            </p>

            <div class="resume-card">
                <div class="resume-info">
                    <div class="resume-icon">📄</div>
                    <div class="resume-name">@Model.UserProfile.ResumeFileName</div>
                </div>

                <div class="resume-actions">
                    <form method="post" asp-page-handler="UpdateResumeVisibility" class="visibility-form">
                        <label class="visibility-label">
                            <input type="checkbox" asp-for="IsResumeVisible" />
                            <span class="visibility-text">Visible to hiring employers</span>
                        </label>
                    </form>

                    <div class="download-actions">
                        <button class="action-btn">
                            <i class="more-icon">⋯</i>
                        </button>
                        <form method="post" asp-page-handler="DownloadResume">
                            <button type="submit" class="download-btn">
                                <i class="download-icon">↓</i> Download
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      
        const visibilityCheckbox = document.querySelector('.visibility-form input[type="checkbox"]');
        if (visibilityCheckbox) {
            visibilityCheckbox.addEventListener('change', function() {
                this.closest('form').submit();
            });
        }


    @if (TempData["Message"] != null)
    {
        <text>
                alert('@TempData["Message"]');
        </text>
    }
    });
</script>

