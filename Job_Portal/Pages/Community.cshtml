@page
@model Job_Portal.Pages.CommunityModel
@{
    ViewData["Title"] = "Community";
}
<head>
    <link rel="stylesheet" href="~/css/com.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/global.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>

<div class="community-container">
    <!-- Left sidebar with profile -->
    <div class="profile-sidebar">
        <div class="profile-avatar">
            <a asp-page="/Profile">
                <img src="/images/Placeholder.jpg" alt="Profile" />
            </a>
        </div>
    </div>

    <!-- Main content area -->
    <div class="main-content">
        <!-- Search bar -->
        <div class="search-container">
            <div class="search-box">
                <i class="search-icon">🔍</i>
                <input type="text" placeholder="Search for feeds or conversations" />
            </div>
        </div>

        <!-- Post creation and feed -->
        <div class="feed-container">
            <!-- Create post -->
            <div class="create-post">
                <div class="post-avatar current-user">
                    <i class="material-icons">account_circle</i>
                </div>

                <form method="post" class="post-form">
                    <input type="text" asp-for="NewPostContent" placeholder="Got something to share?" class="post-input" />
                    <button type="submit" class="post-submit">Post</button>
                </form>
            </div>

            <!-- Posts Here-->
            <div class="posts-feed">
                @foreach (var post in Model.Posts)
                {
                    <div class="post-item">
                        <div class="post-avatar" style="background-color: @post.AuthorColor">
                            <span class="avatar-initial">@post.AuthorName.Substring(0, 1)</span>
                        </div>
                        <div class="post-content">
                            <div class="post-header">
                                <span class="post-author">@post.AuthorName</span>
                                <span class="post-time">@post.GetTimeAgo()</span>
                            </div>
                            <div class="post-text">
                                @post.Content
                            </div>
                            <div class="post-actions">
                                <form method="post" asp-page-handler="LikePost" asp-route-postId="@post.Id" class="like-form">
                                    <button type="submit" class="action-button like-button">
                                        <i class="heart-icon">❤️</i>
                                        <span class="count">@post.LikeCount</span>
                                    </button>
                                </form>
                                <button class="action-button comment-button">
                                    <i class="comment-icon">💬</i>
                                    <span class="count">@post.CommentCount</span>
                                </button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Right sidebar with categories -->
    <div class="categories-sidebar">
        <h3 class="sidebar-title">Explore items here</h3>

        <div class="categories-container">
            @foreach (var category in Model.Categories)
            {
                <div class="category-card">
                    <h4 class="category-title">@category.Name</h4>
                    <p class="category-description">@category.Description</p>
                    <a href="#" class="category-link">Read More</a>
                </div>
            }
        </div>
    </div>
</div>
<script>

    document.addEventListener('DOMContentLoaded', function() {
       
        document.querySelector('.create-post').addEventListener('click', function() {
            document.querySelector('.post-input').focus();
        });
    });
</script>

